<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Dubbing Tool</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 400px;
            text-align: center;
        }

        h1 {
            margin-bottom: 20px;
        }

        .upload-section,
        .language-section,
        .controls,
        .preview-section {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
        }

        .upload-area {
            border: 2px dashed #007bff;
            padding: 30px;
            cursor: pointer;
            color: #007bff;
            margin-bottom: 10px;
        }

        input[type="file"] {
            display: none;
        }

        select {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
        }

        button {
            padding: 10px 15px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:disabled {
            background-color: #ccc;
        }

        video {
            width: 100%;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AI Dubbing Tool</h1>

        <div class="upload-section">
            <label for="videoInput">1. Tải lên tệp</label>
            <div id="uploadArea" class="upload-area" onclick="document.getElementById('videoInput').click()">
                Nhấp để tải lên hoặc thả tệp ở đây
                <br>
                <small>Hỗ trợ .MP4, .MP3</small>
            </div>
            <input type="file" id="videoInput" accept=".mp4, .mp3" onchange="handleFileSelect(event)">
        </div>

        <div class="language-section">
            <label for="languageSelect">2. Chọn ngôn ngữ gốc của video:</label>
            <select id="languageSelect">
                <option value="chinese">Chinese</option>
                <option value="vietnamese">Vietnamese</option>
                <option value="english">English</option>
            </select>
        </div>

        <div class="controls">
            <button id="processBtn" onclick="processVideo()">Dubbing Video</button>
        </div>

        <div class="preview-section">
            <video id="videoPreview" controls></video>
        </div>
    </div>

    <script>
        function handleFileSelect(event) {
            const file = event.target.files[0];
            const uploadArea = document.getElementById('uploadArea');

            if (file) {
                uploadArea.textContent = file.name;
                const videoPreview = document.getElementById('videoPreview');
                videoPreview.src = URL.createObjectURL(file);
                videoPreview.load();
            }
        }

        async function processVideo() {
            const videoFile = document.getElementById('videoInput').files[0];
            const language = document.getElementById('languageSelect').value;

            if (!videoFile) {
                alert('Please upload a video file.');
                return;
            }

            // Tạo đối tượng FormData để gửi tệp và dữ liệu
            const formData = new FormData();
            formData.append('file', videoFile);
            formData.append('language', language);

            try {
                // Gửi yêu cầu POST tới API của Speechify Dubbing
                const response = await fetch('https://api.speechify.com/dubbing', {
                    method: 'POST',
                    headers: {
                        'Authorization': 'mIYyRvA0J1CSVlgh7W7Q3XqJX7JG7rdpeL1sUCfV2U0='  // Thay YOUR_API_KEY_HERE bằng API Key thực tế
                    },
                    body: formData
                });

                // Kiểm tra phản hồi từ API
                if (response.ok) {
                    const data = await response.json();
                    const dubbedVideoURL = data.outputUrl;  // Giả định rằng API trả về URL của video đã được dubbing

                    // Hiển thị video đã dubbing
                    const videoPreview = document.getElementById('videoPreview');
                    videoPreview.src = dubbedVideoURL;
                    videoPreview.load();
                } else {
                    alert('Error during processing. Please try again.');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Failed to process the video. Please try again later.');
            }
        }
    </script>
</body>
</html>
